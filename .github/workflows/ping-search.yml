name: Ping search engines

on:
  workflow_run:
    workflows: ["Build & Deploy Eleventy to Pages"]
    types: [completed]

jobs:
  ping:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    runs-on: ubuntu-latest
    steps:
      - name: Ping Google & Bing
        run: |
          SITE="https://albanpancarte0.github.io/ego-bots-site"
          curl -s "https://www.google.com/ping?sitemap=${SITE}/sitemap.xml" || true
          curl -s "https://www.bing.com/ping?sitemap=${SITE}/sitemap.xml" || true
